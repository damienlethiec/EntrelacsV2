<% content_for :page_header do %>
  <div class="flex items-center justify-between">
    <div>
      <h1 class="text-3xl font-bold tracking-tight text-gray-900"><%= @residence.name %></h1>
      <% if @residence.deleted? %>
        <span class="mt-1 inline-flex items-center rounded-md bg-red-100 px-2 py-1 text-xs font-medium text-red-700"><%= t("residences.status.deleted") %></span>
      <% end %>
    </div>
    <div class="flex items-center gap-x-3">
      <% if policy(@residence).edit? %>
        <%= link_to t("helpers.edit"), edit_residence_path(@residence),
            class: "rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50" %>
      <% end %>
      <% if policy(@residence).destroy? && !@residence.deleted? %>
        <%= button_to t("helpers.delete"), @residence, method: :delete,
            data: { turbo_confirm: t("residences.confirm_delete") },
            class: "rounded-md bg-tisseurs-coral px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-tisseurs-coral-dark" %>
      <% end %>
      <% if policy(@residence).restore? && @residence.deleted? %>
        <%= button_to t("residences.actions.restore"), restore_residence_path(@residence), method: :patch,
            class: "rounded-md bg-tisseurs-teal px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-tisseurs-teal-dark" %>
      <% end %>
    </div>
  </div>
<% end %>

<div class="overflow-hidden bg-white shadow ring-1 ring-black/5 sm:rounded-lg">
  <div class="border-b border-gray-200 px-4 py-5 sm:px-6">
    <h3 class="text-base font-semibold text-gray-900"><%= t("residences.show.details") %></h3>
  </div>
  <div class="px-4 py-5 sm:p-6">
    <dl class="grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2">
      <div>
        <dt class="text-sm font-medium text-gray-500"><%= t("activerecord.attributes.residence.name") %></dt>
        <dd class="mt-1 text-sm text-gray-900"><%= @residence.name %></dd>
      </div>
      <div>
        <dt class="text-sm font-medium text-gray-500"><%= t("residences.show.weavers") %></dt>
        <dd class="mt-1 text-sm text-gray-900">
          <% if @residence.users.weaver.any? %>
            <ul class="list-disc list-inside">
              <% @residence.users.weaver.each do |weaver| %>
                <li><%= weaver.full_name %> (<%= weaver.email %>)</li>
              <% end %>
            </ul>
          <% else %>
            <span class="text-gray-500"><%= t("residences.show.no_weaver") %></span>
          <% end %>
        </dd>
      </div>
      <div class="sm:col-span-2">
        <dt class="text-sm font-medium text-gray-500"><%= t("activerecord.attributes.residence.address") %></dt>
        <dd class="mt-1 text-sm text-gray-900 whitespace-pre-line"><%= @residence.address %></dd>
      </div>
    </dl>
  </div>
</div>

<div class="mt-6">
  <%= link_to t("helpers.back"), residences_path, class: "text-sm font-medium text-tisseurs-teal hover:text-tisseurs-teal-dark" %>
</div>
